# 38. Service Load Balancer.md

## Draft

* end user <> fe external communication 을 상상해보자
* user는 single url만 알면 된다. 
* 이를 위한 로드밸런서 vm을 만들수도 있다(nginx,..)
* k8s는 aws, gco의 그 역할들 모듈들과 통합을 제공
* type = Loadbalancer. anything else is same with node port type.

## Summary using GPT3.5

👨‍🏫 **로드 밸런서 타입 서비스**

- **강의 내용**
  - 로드 밸런서 타입 서비스에 대해 살펴봄.
  - 노드 포트 서비스는 외부에 노출된 애플리케이션을 워커 노드의 포트를 통해 이용할 수 있도록 함.
  - 프런트엔드 애플리케이션에 주목.
  - 투표 앱과 결과 앱이 프런트엔드로 호스팅됨.
  - 이러한 파드는 클러스터의 워커 노드에 있음.
  - 외부 사용자가 애플리케이션에 액세스하기 위해 노드 포트 타입의 서비스를 생성.
  - 노드 포트 타입의 서비스는 노드의 포트에서 트래픽을 수신하고 해당 파드로 라우팅하는 데 도움.

  - 사용자에게 어떤 URL을 제공하여 애플리케이션에 액세스할 것인가?
  - 사용자는 모든 노드의 IP와 해당 서비스가 노출된 고 포트를 사용하여 두 애플리케이션에 액세스할 수 있음.
  - 파드가 클러스터의 두 노드에만 호스팅되어도 클러스터의 모든 노드의 IP에서 접근할 수 있음.

- **중요한 포인트**
  - 사용자가 단일 URL을 사용하여 애플리케이션에 액세스할 수 있어야 함.
  - 클라우드 플랫폼에서 네이티브 로드 밸런서를 활용하여 외부 로드 밸런싱을 수행할 수 있음.
  - 지원되는 클라우드 플랫폼(GCP, AWS, Azure)에서만 작동함.
  - 서비스 유형을 로드 밸런서로 설정하여 외부 로드 밸런서를 사용할 수 있음.

- **시험 고려 사항**
  - 로드 밸런서 타입 서비스를 구성하는 방법에 대한 이해.
  - 클라우드 플랫폼의 네이티브 로드 밸런서와의 통합 방법 이해.
  - 서비스 유형을 설정하여 외부 로드 밸런서를 사용할 수 있는 환경 확인.


# Script from GPT3.5

📝 **로드 밸런서 유형**

Instructor: 이제 로드 밸런서 유형이라고 하는 다른 유형의 서비스를 살펴보겠습니다.

우리는 노드 보드 서비스를 본 적이 있습니다.

외부에서 접근 가능하게 해주는 서비스입니다.

워커 노드의 포트에 애플리케이션을 사용할 수 있도록 도와줍니다.

그래서 우리의 초점을 앞단 애플리케이션으로 돌려봅시다.

투표 앱과 결과 앱입니다.

이제 이 파드들이 클러스터의 워커 노드에 호스팅되는 것을 알고 있습니다.

우리가 4개의 노드 클러스터를 가지고 있다고 가정해 봅시다.

그리고 외부 사용자가 애플리케이션에 액세스할 수 있도록,

우리는 이러한 서비스를 노드 포트 유형으로 생성합니다.

이제 노드 포트 유형의 서비스는 노드의 포트에서 트래픽을 수신하고

트래픽을 해당 파드로 라우팅하는 데 도움이 됩니다.

하지만 사용자에게 어떤 URL을 제공해야 할까요?

사용자는 모든 노드의 IP와 해당 서비스가 노출된 고 포트를 사용하여

두 애플리케이션 중 하나에 액세스할 수 있습니다.

그래서 투표 앱에 대해 4개의 IP와 포트 조합이 있고,

결과 앱에 대해 4개의 IP와 포트 조합이 있을 것입니다.

그래서 주의할 점은 파드가 클러스터의 두 노드에만 호스팅되더라도,

그것들은 여전히 클러스터의 모든 노드의 IP에서 액세스 가능하다는 것입니다.

예를 들어, 투표 앱을 위한 파드가 IP 70과 71을 가진 노드에만 배포되어 있다고 가정해 봅시다.

그것들은 여전히 클러스터의 모든 노드의 포트에서 액세스 가능할 것입니다.

그래서 서비스가 어떻게 구성되는지 알아봤습니다.

이제 이 URL을 사용자에게 제공하여 애플리케이션에 액세스합니다.

하지만 그것이 최종 사용자가 원하는 것은 아닙니다.

그들은 예를 들어, 투표 앱 닷컴이나 결과 앱 닷컴과 같은 하나의 URL이 필요합니다.

그래서 어떻게 이것을 달성할까요?

이것을 달성하는 한 가지 방법은 로드 밸런서 목적으로 새로운 VM을 생성하는 것입니다.

그리고 AJ/Proxy나 nginx와 같은 적합한 로드 밸런서를 설치하고 구성합니다.

그런 다음 로드 밸런서를 사용하여 트래픽을 기본 노드로 라우팅하도록 구성합니다.

이제 모든 외부 로드 밸런싱을 설정하고,

그것을 유지 관리하는 것은 지루한 작업이 될 수 있습니다.

그러나 만약 우리가 지원되는 클라우드 플랫폼에서 작업한다면,

구글 클라우드나 AWS나 Azure와 같은,

나는 그 클라우드 플랫폼의 네이티브 로드 밸런서를 활용할 수 있을 것입니다.

쿠버네티스는 특정 클라우드 제공 업체의 네이티브 로드 밸런서와 통합할 수 있는 지원을 제공하며,

우리를 위해 그것을 구성할 수 있습니다.

따라서 앞단 서비스의 서비스 유형을 노드 포트 대신 로드 밸런서로 설정하면 됩니다.

이제 이것은 지원되는 클라우드 플랫폼에서만 작동한다는 것을 기억하세요.

따라서 GCP, AWS 및 Azure는 확실히 지원됩니다.

따라서 지원되지 않는 환경에서 서비스 유형을 로드 밸런서로 설정하면,

가상박스나 다른 환경과 같이,

그것은 노드의 고 포트에서 서비스가 노출되는 것과 같은 효과가 있을 것입니다.

거기서는 외부 로드 밸런스나 구성이 수행되지 않습니다.

그러니 나중에 클라우드 플랫폼에 애플리케이션을 배포하는 데 대한 데모를 진행할 때,

이것을 실제로 보게 될 것입니다.

이것으로 이번 강의는 마치겠습니다.

다음 강의에서 뵙겠습니다.